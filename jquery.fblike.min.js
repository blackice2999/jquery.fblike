(function(a){a.fn.fblike=function(f,c,b,e){var d={};d.fbDialogContentUrl=a.extend({},a.fn.fblike.defaults.fbDialogContentUrl,f);d.fbLikeSettings=a.extend({},a.fn.fblike.defaults.fbLikeSettings,c);d.fbDialogSettings=a.extend({},a.fn.fblike.defaults.fbDialogSettings,b);d.fbCookieSettings=a.extend({},a.fn.fblike.defaults.fbCookieSettings,e);return this.each(function(){var m=this;var g=a.cookie("jquery.fblike");var h=a("#jl-fb-like-dialog-container");if(g=="user_accepted"){l()}else{i();j()}function i(){if(h.length>0){return}var p={buttons:{Ok:function(){a(this).dialog("close");k()},Abbrechen:function(){a(this).dialog("close")}}};var o=a.extend(d.fbDialogSettings,p);h=a('<div id="jl-fb-like-dialog-container" style="display:none"></div>').appendTo("body");h.load(d.fbDialogContentUrl,{},function(r,s,q){h.dialog(o)})}function j(){a(m).bind("click",n).css("cursor","pointer")}function l(){var o='<iframe src="http://www.facebook.com/plugins/like.php?';o+="href="+d.fbLikeSettings.href+"&amp;";o+="layout="+d.fbLikeSettings.layout+"&amp;";o+="show_faces="+d.fbLikeSettings.show_faces+"&amp;";o+="width="+d.fbLikeSettings.width+"&amp;";o+="action="+d.fbLikeSettings.action+"&amp;";o+="colorscheme="+d.fbLikeSettings.colorscheme+"&amp;";o+=d.fbLikeSettings.attributes+" >";o+="</iframe>";a(m).html(o)}function k(){a.cookie("jquery.fblike","user_accepted",d.fbCookieSettings);location.reload(true)}function n(){h.dialog("open")}})};a.fn.fblike.defaults={fbLikeSettings:{href:window.location.href,layout:"standard",show_faces:"true",width:"450",action:"like",colorscheme:"light",attributes:'height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:80px;" allowTransparency="true"'},fbDialogSettings:{resizable:false,height:540,width:900,modal:true,autoOpen:false},fbCookieSettings:{expires:90,path:"/",domain:window.location.hostname},fbDialogContentUrl:""}})(jQuery);